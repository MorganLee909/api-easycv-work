<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>API Documentation | easycv.work</title>
        <link rel="stylesheet" href="/api/css">
    </head>
    <body>
        <div class="contents">
            <h1>easycv.work</h1>
            <h2>Routes</h2>
            <h3>User</h3>
            <a href="#loginRoute">Login</a>
            <a href="#retrieveUserRoute">Retrieve User</a>
            <a href="#createUserRoute">Create User</a>
            <a href="#updateUserRoute">Update User</a>
            <a href="#deleteUserRoute">Delete User</a>
            <h3>CV</h3>
            <a href="#retrieveOneCvRoute">Retrieve One CV</a>
            <a href="#retrieveManyCvRoute">Retrieve Many CV's</a>
            <a href="#createCvRoute">Create CV</a>
            <a href="#updateCvRoute">Update CV</a>
            <a href="#deleteCvRoute">Delete CV</a>
            <a href="#addEmploymentRoute">Add Employment</a>
            <a href="#updateEmploymentRoute">Update Employment</a>
            <a href="#deleteEmploymentRoute">Delete Employment</a>
            <h2>Models</h2>
            <a href="#userModel">User</a>
            <a href="#cvModel">CV</a>
        </div>

        <div style="width:350px;"></div>

        <div class="docs">
            <h1>API Docs for easycv.work</h1>

            <h1>Routes</h1>

            <div id="loginRoute" class="route">
                <h2><span class="method">POST:</span>/api/login</h2>
                <p>Logs in the user</p>
                <pre><code>body = {
    email (String): user email
    password (String): user password
}</code></pre>
                <pre><code>response = {
    jwt: JSON Web Token    
}</code></pre>
            </div>

            <div id="retrieveUserRoute" class="route">
                <h2><span class="method">GET:</span>/api/user</h2>
                <p>Retrieves the data for the currently logged in user</p>
                <code>response = User</code>
            </div>

            <div id="createUserRoute" class="route">
                <h2><span class="method">POST:</span>/api/user</h2>
                <p>Creates a new user. User is logged in once created.</p>
                <pre><code>body = {
    firstName (String): user first name
    lastName (String): user last name
    email (String): user email, must be unique
    password (String): user password, minimum 10 characters
}</code></pre>
                <pre><code>response = {
    user: User
    jwt: JSON Web Token
}</code></pre>
            </div>

            <div id="updateUserRoute" class="route">
                <h2><span class="method">PUT:</span>/api/user</h2>
                <p>Updates many of the user details. NOTE: for languages and skill, if it is undefined/null then there will be no change. Otherwise all languages must be provided, new and existing</p>
                <pre><code>body = {
    email (String, optional): new email address
    firstName (String, optional): new first name
    lastName (String, optional): new last name
    languages (Optional): [{
        name (String): language name,
        level (String, optional): language level
    }]
    skills ([String], optional): user skills, must contain all skills, new and old
}</code></pre>
                <code>response = User</code>
            </div>

            <div id="deleteUserRoute" class="route">
                <h2><span class="method">DELETE:</span>/api/user</h2>
                <p>Deletes all data for a single user. Only works for currently logged in account. This will delete all CV's associated with the user account as well.</p>
                <code>response = {}</code>
            </div>

            <div id="retrieveOneCvRoute" class="route">
                <h2><span class="method">GET:</span>/api/cv/:cv</h2>
                <p>Retrieve the data for a single CV from the CV id. Non-sensitive user data is populated.</p>
                <pre><code>Parameters
    cv: id for the CV to be retrieved</code></pre>
                <code>response = CV</code>
            </div>

            <div id="retrieveManyCvRoute" class="route">
                <h2><span class="method">GET:</span>/api/cv</h2>
                <p>Retrieve all CV's for the logged in user.</p>
                <code>response = [CV]</code>
            </div>

            <div id="createCvRoute" class="route">
                <h2><span class="method">POST:</span>/api/cv</h2>
                <p>Create a new CV for the logged in user.</p>
                <pre><code>body = {
    jobTitle (String): job title for the user
    jobCategory (String): category that job falls under
    experience (Number): years of experience in job
    skills ([String]): list of user skills that apply to the job
}</code></pre>
                <code>response = CV</code>
            </div>

            <div id="updateCvRoute" class="route">
                <h2><span class="method">PUT:</span>/api/cv</h2>
                <p>Updates basic data for a CV. For 'skills', 'newEmployment' and 'removeEmployment', a value of undefined or null will leave those properties unchanged. Provide all skills to update the skills field, it will completely replace the data.</p>
                <pre><code>body = {
    cv (String): id of CV to update
    jobTitle (String, optional): job title for CV
    jobCategory (String, optional): job category for CV
    experience (Number, optional): years of experience in position
    skills ([String], optional): skill applicable to CV
}</code></pre>
                <code>response = CV</code>
            </div>

            <div id="deleteCvRoute" class="route">
                <h2><span class="method">DELETE:</span>/api/cv/:cv</h2>
                <p>Deletes a single cv owned by a user</p>
                <code>response = {}</code>
            </div>

            <div id="addEmploymentRoute" class="route">
                <h2><span class="method">POST:</span>/api/cv/:cv/employment</h2>
                <p>Adds a single job to the work history on a CV</p>
                <pre><code>params = {
    cv: ID of cv to add employment to
}</code></pre>
                <pre><code>body = {
    position (String): name of position held in company
    employer (String): name of company/person worked for
    startDate (Date): date of start of employment
    endDate (Date, optional): date of end of employment
    description (String): description of duties held at company
}</code></pre>
                <code>response = Employment</code>
            </div>

            <div id="updateEmploymentRoute">
                <h2><span class="method">PUT:</span>/api/cv/:cv/employment/:employment</h2>
                <p>Update the details of a single job in the work history on a CV</p>
                <pre><code>params = {
    cv: ID of CV containing employment to be updated
    employment: ID of employment to be updated within `workHistory`
}</code></pre>
                <pre><code>body = {
    position (String, optional): name of position held in company
    employer (String, optional): name of company/person worked for
    startDate (Date, optional): date of start of employment
    endDate (Date, optional): date of end of employment
    description (String, optional): description of duties held at company
}</code></pre>
            </div>

            <div id="deleteEmploymentRoute" class="route">
                <h2><span class="method">DELETE:</span>/api/cv/:cv/employment/:employment</h2>
                <p>Remove a single job from the work history on a CV</p>
                <pre><code>params = {
    cv: ID of cv to remove employment from
    employment: ID of employment to be removed from 'workHistory'
}</code></pre>
            <code>response = {}</code>
            </div>

            <h1>Data</h1>

            <div id="userModel" class="model">
                <h2>User</h2>
                <p>Application user</p>
                <pre><code>{
    email (String): user email
    firstName (String): user first name
    lastName (String): user last name
    languages: [{
        name (String): language name
        level (String, optional): proficiency level of the language
    }]
    skills ([String], optional): List of skills for the user
    cvs ([CV]): List of CV's for the user. Will always contain at least one CV
}</code></pre>
            </div>

            <div id="cvModel" class="model">
                <h2>CV</h2>
                <p>A resume/CV for a specific user</p>
                <pre><code>{
    user (User): user that owns the CV
    jobTitle (String): Job title of user
    jobCategory (String): Category of job
    experience (Number): Number of years of experience
    skills ([String]): List of skills from user that apply to this CV,
    workHistory: [{
        position (String): Job title of position held at company
        employer (String): company that user worked at
        startDate (Date): date of start of employment
        endDate (Date): date of end of employment. Undefined if current
        description (String): description of job performed for company
    }]
}</code></pre>
            </div>
        </div>
    </body>
</html>